/* Shield UI 1.7.44 Free for Non-Commercial Version | Copyright 2013-2022 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(r,s,l,h){var e,i,n,u=s.ui.Widget,t=s.Class,p=s.DataSource,o=(document,Math.abs,Math.min),a=Math.max,d=Math.pow,c=(Math.floor,r.proxy),g=(r.each,r.map,s.format),f=s.to.int,m=s.error,_=s.is,v=_.defined,w=(_.string,_.object,_.func,s.to.number,"horizontal"),T="vertical",I="click",C="disabled",x=t.extend({init:function(t,e,i,n){var o=this;o.left=t,o.top=e,o.width=i,o.height=n},getSize:function(){return o(this.width,this.height)},getRowContainers:function(t){var e,i=this,n=i.left,o=i.top,a=i.sum(t),r=a/i.height,s=a/i.width,l=[];if(i.width>=i.height)for(e=0;e<t.length;e++)l.push({left:n,top:o,right:n+r,bottom:o+t[e].targetValue/r,dataItem:t[e]}),o+=t[e].targetValue/r;else for(e=0;e<t.length;e++)l.push({left:n,top:o,right:n+t[e].targetValue/s,bottom:o+s,dataItem:t[e]}),n+=t[e].targetValue/s;return l},remainingArea:function(t){var e,i,n=this,o=n.width>=n.height?(e=t/n.height,i=n.width-e,new x(n.left+e,n.top,i,n.height)):(t=t/n.width,o=n.height-t,new x(n.left,n.top+t,n.width,o));return o},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].targetValue;return e}}),y=t.extend({init:function(){},sort:function(t){t.sort(function(t,e){return e.targetValue-t.targetValue})},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].targetValue;return e},min:function(t){for(var e=h,i=0;i<t.length;i++)(!v(e)||e>t[i].targetValue)&&(e=t[i].targetValue);return e},max:function(t){for(var e=h,i=0;i<t.length;i++)(!v(e)||e<t[i].targetValue)&&(e=t[i].targetValue);return e}});y.create=function(t){return new("squarified"===t?n:t===w?e:i)},e=y.extend({init:function(){y.fn.init.apply(this,arguments)},execute:function(t,e,i,n,o){var a,r,s,l,h,u,p=this.sum(t),d=e.left,c=e.top,g=!o||o===w;for(this.sort(t),u=0;u<t.length;u++)s=t[u],a=g?e.width*s.targetValue/p:e.width,r=g?e.height:e.height*s.targetValue/p,s.items&&0!==s.items.length?(l=n.createGroup(i,new x(d,c,a,r)),h=n.createTitle(l,n.getItemText(s)),h=new x(h.left-l.position().left,h.top-l.position().top,h.width,h.height),this.execute(s.items,h,l,n,g?T:w)):n.createItem(i,{left:d,top:c,width:a,height:r,dataItem:s}),g?d+=a:c+=r}}),i=y.extend({init:function(){y.fn.init.apply(this,arguments)},execute:function(t,e,i,n,o){var a,r,s,l,h,u,p=this.sum(t),d=e.left,c=e.top,g=!o||o===T;for(this.sort(t),u=0;u<t.length;u++)s=t[u],r=g?e.height*s.targetValue/p:e.height,a=g?e.width:e.width*s.targetValue/p,s.items&&0!==s.items.length?(l=n.createGroup(i,new x(d,c,a,r)),h=n.createTitle(l,n.getItemText(s)),h=new x(h.left-l.position().left,h.top-l.position().top,h.width,h.height),this.execute(s.items,h,l,n,g?w:T)):n.createItem(i,{left:d,top:c,width:a,height:r,dataItem:s}),g?c+=r:d+=a}}),n=y.extend({init:function(){y.fn.init.apply(this,arguments)},execute:function(t,e,i,n){var o,a,r,s,l,h=this;for(h.sort(t),e=h._squarifyCore(h._normalize(t,e.width*e.height,n),[],e,[]),o=h._getTreemap(e),l=0;l<o.length;l++)(a=o[l]).dataItem.items&&0!==a.dataItem.items.length?(r=n.createGroup(i,new x(a.left,a.top,a.right-a.left,a.bottom-a.top)),s=n.createTitle(r,n.getItemText(a.dataItem)),s=new x(s.left-r.position().left,s.top-r.position().top,s.width,s.height),h.execute(a.dataItem.items,s,r,n)):n.createItem(i,{left:a.left,top:a.top,width:a.right-a.left,height:a.bottom-a.top,dataItem:a.dataItem})},_squarifyCore:function(t,e,i,n){var o,a;if(0!==t.length)return o=i.getSize(),a=t[0],this._verifyRatio(e,a,o)?(e.push(a),this._squarifyCore(t.slice(1),e,i,n)):(a=i.remainingArea(this.sum(e)),n.push(i.getRowContainers(e)),this._squarifyCore(t,[],a,n)),n;n.push(i.getRowContainers(e))},_getTreemap:function(t){for(var e,i=[],n=0;n<t.length;n++)for(e=0;e<t[n].length;e++)i.push(t[n][e]);return i},_verifyRatio:function(t,e,i){var n;return 0===t.length||((n=t.slice()).push(e),t=this._calculateRatio(t,i),this._calculateRatio(n,i)<=t)},_calculateRatio:function(t,e){var i=this.min(t),n=this.max(t),t=this.sum(t);return a(d(e,2)*n/d(t,2),d(t,2)/(d(e,2)*i))},_normalize:function(t,e,i){for(var n=e/this.sum(t),o=[],a=0;a<t.length;a++)o[a]=t[a],o[a].targetValue=o[a].targetValue*n;return o}}),_={cls:h,enabled:!0,width:h,height:h,title:h,dataSource:h,readDataSource:!0,type:"squarified",valueTemplate:"{value}",textTemplate:"{title}",colorTemplate:"{color}",colors:["#1E98E4","#FFC500","#5CB85C","#FF2A00","#6D31FF","#00B2A1","#FF8000","#84B3DC"],tooltip:{enabled:!1,template:"{title}: {value}",filter:".sui-treemap-item",delay:80,position:"top"},events:{}},(t=u.extend({init:function(){u.fn.init.apply(this,arguments);var t=this,e=r(t.element),i=t.options,n=i.cls,o=i.dataSource,a=i.dieOnError;if("div"===e.prop("tagName").toLowerCase()){if(e.addClass("sui-treemap "+(n?" "+n:"")),v(i.width)&&e.css("width",i.width),v(i.height)&&e.css("height",i.height),!o)return t.destroy(),void m("shieldTreemap: dataSource is not defined.",a);t.dataSource=p.create(o),t._eventNS=o=".shieldTreeMap"+t.getInstanceId(),t.containers=[],t.colorIndex=0,r(l).on("resize"+o,c(t._onWinResize,t)),t.dataSource.on("change"+o,c(t._dsChange,t)),i.readDataSource&&t.dataSource.read(),t.enabled(i.enabled)}else m("shieldTreeMap: Underlying element is not DIV.",a)},_dsChange:function(){var t=this,e=t.element;t._create(),t._createTooltip(),t._elWidth=e.width(),t._elHeight=e.height()},_onWinResize:function(t){var e=this;e._onWinResTimeout&&clearTimeout(e._onWinResTimeout),e._onWinResTimeout=setTimeout(c(e._winResized,e),100)},_winResized:function(){var t=this.element;this._elWidth===t.width()&&this._elHeight===t.height()||this.refresh()},_createTooltip:function(){var t=this,e=t.options.tooltip;e.enabled&&(t.tooltip?t.tooltip.refresh(e):t.tooltip=r(t.element).children(".sui-treemap-group").first().shieldTooltip(e).swidget())},_create:function(){var t=this,e=t.element,i=t.dataSource.data,n=t.options,o=y.create(n.type),a=new x(0,0,e.innerWidth(),e.innerHeight());e.empty(),t._prepareData(i),e=t.createGroup(e,a),a=t.createTitle(e,n.title),o.execute(i,a,e,t)},_prepareData:function(t){for(var e=0;e<t.length;e++)t[e].targetValue=this.getItemValue(t[e]),t[e].items&&this._prepareData(t[e].items)},createTitle:function(t,e){var i,n,o,a=this.options.type===w;return"undefined"===e||e===h?new x(t.position().left,t.position().top,t.innerWidth(),t.innerHeight()):(o=r('<div class="sui-treemap-title"></div>').appendTo(t),a&&o.innerHeight(t.outerHeight()),o.append('<div class="sui-treemap-title-inner">'+e.replace(/\s+/,"&nbsp;")+"</div>"),s.ui.Position.Set(o.find(".sui-treemap-title-inner"),o,{source:"center",target:"center"}),i=a?t.position().left+o.outerWidth():t.position().left,n=a?t.position().top:t.position().top+o.outerHeight(),e=a?t.innerWidth()-o.outerWidth():t.innerWidth(),o=a?t.innerHeight():t.innerHeight()-o.outerHeight(),new x(i,n,e,o))},createGroup:function(t,e){return this._createContainer(t,e).addClass("sui-treemap-group sui-treemap-group-"+this.options.type)},createItem:function(t,e){var i=this,n=i.options,o=n.tooltip,n=(n.type,i.getItemText(e.dataItem)),t=i._createContainer(t,e);t.addClass("sui-treemap-item").css("backgroundColor",i._getContentColor(e.dataItem)).on(I,c(i._contentClick,i,e.dataItem)),o.enabled&&t.attr("title",g(o.template,e.dataItem)),i.containers.push(t),t.html(n)},_contentClick:function(t){this._enabled&&this.trigger(I,{title:this.getItemText(t),value:this.getItemValue(t),item:t})},_createContainer:function(t,e){return r("<div/>").appendTo(t).css({left:e.left,top:e.top,width:e.width,height:e.height})},_getContentColor:function(t){var e=this.options.colors;return this._getItemColor(t)||e[this.colorIndex++%e.length]},getItemValue:function(t){return f(g(this.options.valueTemplate,t))},getItemText:function(t){return g(this.options.textTemplate,t)},_getItemColor:function(t){t=g(this.options.colorTemplate,t);return"undefined"!==t&&null!==t?t:h},enabled:function(){var t=this,e=r(t.element),i=[].slice.call(arguments);if(!(0<i.length))return t._enabled;(i=!!i[0])?e.removeAttr(C).removeClass("sui-treemap-disabled"):e.attr(C,C).addClass("sui-treemap-disabled"),t.tooltip&&t.tooltip.enabled(i),t._enabled=i},destroy:function(){var t,e=this,i=e._eventNS;for(r(l).off(i),clearTimeout(e._onWinResTimeout),e._onWinResTimeout=null,e.dataSource&&e.dataSource.off(i),e.tooltip&&(e.tooltip.destroy(),e.tooltip=null),t=0;t<e.containers.length;t++)e.containers[t].off(I);e.containers=null,r(e.element).empty(),u.fn.destroy.call(e)}})).defaults=_,s.ui.plugin("TreeMap",t)}(jQuery,shield,this);