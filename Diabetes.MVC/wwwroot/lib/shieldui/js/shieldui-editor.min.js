/* Shield UI 1.7.44 Free for Non-Commercial Version | Copyright 2013-2022 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(h,d,t,r){function u(e,t,n,i){if(i)try{e.execCommand(t,!1,n)}catch(e){}else e.execCommand(t,!1,n)}var l,f,n,i,o,a,c=d.ui.Widget,e=d.Class,m=(d.Constants.KeyCode,document),p=h.proxy,s=(h.each,h.extend),g=(h.map,h.contains),x=(h.trim,d.error,d.guid),v=d.format,_=d.is.defined,y=(d.is.boolean,d.is.integer,d.is.func),b=(d.is.array,d.is.object,d.is.string),T=d.to.string,w=d.to.int,C=d.support.browser,S="disabled",E="click",k="keyup",B="keydown",N="formatting",R="text-formatting",I="font-and-colors",D="alignment",L="lists",V="links",A="sui-editor",P="styleWithCSS",F="about",O="About",W="&#x44;&#x65;&#x6D;&#x6F;&#x20;&#x76;&#x65;&#x72;&#x73;&#x69;&#x6F;&#x6E;&#x20;&#x62;&#x79;";W+="&#x20;&#x3C;&#x61;&#x20;&#x68;&#x72;&#x65;&#x66;&#x3D;&#x22;&#x68;&#x74;&#x74;&#x70;&#x3A;&#x2F;&#x2F;&#x77;&#x77;&#x77;&#x2E;&#x73;&#x68;",l=function(n,i){var e,r,t,a;function o(e){e?this.range=i.selection.createRange():(this.range=i.body.createTextRange(),this.collapse(!0)),this.init()}function s(){this.selection=i.selection,this.ranges=[],this.init()}!n.getSelection&&i.selection&&(e=null,n.getSelection=function(){return null!=e?e:e=new t},i.createRange=function(){return new r},i.attachEvent("onkeydown",function(){return n.getSelection().setRangeAt(0,new r(!0))}),i.attachEvent("onselectionchange",function(){var e,t;try{t=new r(!0)}catch(e){}if(t)return n.getSelection().setRangeAt(0,t),"INPUT"===(e=i.selection.createRange().parentElement()).tagName||"TEXTAREA"===e.tagName?(t=n.getSelection().getRangeAt(0),e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd,e.selectionEnd):void 0}),r=n.Range=(o.END_TO_END="EndToEnd",o.END_TO_START="EndToStart",o.START_TO_END="StartToEnd",o.START_TO_START="StartToStart",o.prototype.init=function(){var e,t,n,i=this,o=i.range.parentElement();return i.commonAncestorContainer=o,i.collapsed=0===i.compareBoundaryPoints("StartToEnd",i),(n=i.range.duplicate()).moveToElementText(o),e=0<i.range.text.length?0:1,t=a.findLength("StartToStart",n,i.range),t=a.findNodeByPos(o,t,e),i.startContainer=t.el,i.startOffset=t.offset,e=a.findLength("StartToEnd",n,i.range),t=a.findNodeByPos(o,e,1),i.endContainer=t.el,i.endOffset=t.offset,i.selectionStart=a.findLength("StartToStart",n,i.range,i),i.selectionEnd=a.findLength("StartToEnd",n,i.range,i),i.selectionEnd},o.prototype.select=function(){return this.range.select()},o.prototype.setStart=function(e,t){var n,i;if(a.getText(e).length>=t&&0<=t)return i=this.range.duplicate(),3===e.nodeType&&(n=a.findPosFromNode(e),i.moveToElementText(e.parentNode),i.moveStart("character",n+t)),-1===this.range.compareEndPoints("StartToEnd",i)&&this.range.setEndPoint("EndToStart",i),this.range.setEndPoint("StartToStart",i)},o.prototype.setEnd=function(e,t){var n,i;if(a.getText(e).length>=t&&0<=t)return i=this.range.duplicate(),3===e.nodeType&&(n=a.findPosFromNode(e),i.moveToElementText(e.parentNode),i.moveStart("character",n+t)),this.range.setEndPoint("EndToStart",i)},o.prototype.selectNodeContents=function(e){return this.range.moveToElementText(e)},o.prototype.collapse=function(e){return e?this.range.setEndPoint("EndToStart",this.range):this.range.setEndPoint("StartToEnd",this.range)},o.prototype.deleteContents=function(){},o.prototype.insertNode=function(e){e=e.outerHTML||h(i.createElement("div")).append(h(e).clone()).html();this.range.pasteHTML(e)},o.prototype.compareBoundaryPoints=function(e,t){return this.range.compareEndPoints(e,t.range)},o.prototype.cloneRange=function(){var e=new o;return e.range=this.range.duplicate(),e.init(),e},o.prototype.detach=function(){return delete this.range},o.prototype.getBoundingClientRect=function(){var e=this.range.getBoundingClientRect();return{width:e.right-e.left,height:e.bottom-e.top,left:e.left,right:e.right,bottom:e.bottom,top:e.top}},o.prototype.toString=function(){return this.range.text||""},o),s.prototype.init=function(){var e,t,n,i,o=this;if(o.rangeCount=o.ranges.length,o.rangeCount)return t=o.ranges[0],null==o.prev&&(o.prev=t),i=0===t.compareBoundaryPoints(r.END_TO_END,o.prev)?(e=(n=["end","start"])[0],n[1]):(e=(i=["start","end"])[0],i[1]),o.anchorNode=t[e+"Container"],o.anchorOffset=t[e+"Offset"],o.focusNode=t[i+"Container"],o.focusOffset=t[i+"Offset"],o.isCollapsed=o.anchorNode===o.focusNode,o.isCollapsed},s.prototype.getRangeAt=function(e){return this.ranges[e]},s.prototype.setRangeAt=function(e,t){return this.prev=this.ranges[e],this.ranges[e]=t,this.init()},s.prototype.removeAllRanges=function(){return this.ranges=[],this.init()},s.prototype.addRange=function(e){var t,n,i,o,r;for(this.ranges.push(e),this.init(),r=[],n=0,i=(o=this.ranges).length;n<i;n++)t=o[n],r.push(t.select());return r},s.prototype.deleteFromDocument=function(){return this.selection.clear()},s.prototype.toString=function(){return this.ranges[0].toString()},t=s,a={convertLineBreaks:function(e){return e.replace(/\r\n/g,"\n")},stripLineBreaks:function(e){return e.replace(/\r\n/g,"")},getText:function(e){return e.innerText||e.nodeValue},findLength:function(e,t,n,i){var o=t.duplicate();switch(e){case"StartToStart":o.setEndPoint("EndToStart",n);break;case"StartToEnd":o.setEndPoint("EndToEnd",n)}return(i?a.convertLineBreaks(o.text):a.stripLineBreaks(o.text)).length},findNodeByPos:function(e,t,n){var u;return(u=function(e,t,n,i){for(var o,r=e.childNodes,a=[],s=0,l=r.length;s<l;s++)if(o=r[s],!i.found)if(3===o.nodeType){if(i.length+o.length+n>t){i.found=!0,i.el=o,i.offset=t-i.length;break}a.push(i.length+=o.length)}else a.push(u(o,t,n,i));return a})(e,t,n=null==n?0:n,e={length:0,el:e,offset:0}),e},findPosFromNode:function(e){var t={pos:0},n=e.parentNode,l=function(e,t,n){for(var i,o=e.childNodes,r=[],a=0,s=o.length;a<s;a++)if(i=o[a],!n.found){if(i===t){n.found=!0;break}3===i.nodeType?r.push(n.pos+=i.length):i.hasChildNodes()?r.push(l(i,t,n)):r.push(void 0)}return r};return l(n,e,t),t.pos}})},W+="&#x69;&#x65;&#x6C;&#x64;&#x75;&#x69;&#x2E;&#x63;&#x6F;&#x6D;&#x22;&#x20;&#x74;&#x61;&#x72;&#x67;&#x65;&#x74;&#x3D;&#x22;&#x5F;&#x62;&#x6C;&#x61;&#x6E;&#x6B;&#x22;&#x3E;&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x3C;&#x2F;&#x61;&#x3E;",(f=e.extend({init:function(e,t){var n=this;n._editor=e,b(t)?a[t]?(n.options=s(!0,{},a[t]),n._default=!0):n.options={name:t}:n.options=s(!0,{},t)},_renderButton:function(e){var t=this,n=t._editor,i=t.options,o=i.name,r=i.tooltip||n.options.messages[o]||"",n=i.cls||(t._default?"sui-editor-toolbar-icon sui-editor-toolbar-icon-"+o.toLowerCase():""),o=s(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-button",events:{click:function(e){t.execute(e)}}},i.controlOptions);t._widget=h('<button type="button" title="'+r+'"/>').append(i.text||"<span"+(n?' class="'+n+'"':"")+">&nbsp;</span>").appendTo(e).shieldButton(o).swidget()},render:function(e){var t=this.options,n=t.template;_(n)?(t=v.call(this._editor,n,t))&&h(t).appendTo(e):this._renderButton(e)},execute:function(e){function t(){r._afterCommand(e,i,n.getState())}var n=this,i=n.options,o=i.exec,r=n._editor;y(o)?o.call(r,i,t):n.executeCommand(t)},executeCommand:function(e){var t=this.options,n=t.styleWithCSS,i=this._editor,o=i.getDoc();i.focus(!0),n&&u(o,P,!0,!0),u(o,t.name,this.getValue()),n&&u(o,P,!1,!0),y(e)&&e.call(this)},getValue:function(){},setValue:function(e){},getState:function(){var e,t,n,i,o=this.options,r=o.name,a=o.styleWithCSS,s=this._editor.getDoc(),o=!0;a&&u(s,P,!0,!0);try{o=s.queryCommandIndeterm(r)}catch(e){}try{e=s.queryCommandEnabled(r)}catch(e){}if(!o)try{t=s.queryCommandState(r)}catch(e){}try{n=s.queryCommandSupported(r)}catch(e){}try{i=s.queryCommandValue(r)}catch(e){}return a&&u(s,P,!1,!0),{enabled:e,state:t,supported:n,value:i}},getWidget:function(){return this._widget},refresh:function(){var e,t=this._widget;this._default&&((e=this.getState()).enabled?(t.visible(!0),this.setValue(e)):t.visible(!1))},destroy:function(){var e=this;e._widget&&y(e._widget.destroy)&&e._widget.destroy(),e._default=e._widget=r}})).getInstance=function(e,t){var n="";return b(t)?a[t]&&(n=a[t].controlType):n=t.controlType,new(n=n||f)(e,t)},d.ui.EditorCommand=f,n=f.extend({}),d.ui.EditorCommand=f,i=n.extend({init:function(e,t){n.fn.init.call(this,e,t),s(!0,this.options,{controlOptions:{toggle:!0}})},getValue:function(){return!!this._widget.checked()},setValue:function(e){this._widget.checked(!!e.state)}}),d.ui.EditorCommandToggleButton=i,o=f.extend({render:function(e){var t=this,n=t._editor,i=t.options,n=i.tooltip||n.options.messages[i.name]||"",i=s(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-select",events:{itemclick:function(e){t.execute(e)}}},i.controlOptions);t._widget=h('<select title="'+n+'"/>').appendTo(e).shieldComboBox(i).swidget()},getValue:function(){return this._widget.value()},setValue:function(e){this._widget.value(e.value)}}),W=(d.ui.EditorCommandComboBox=o).extend({init:function(e,t){o.fn.init.call(this,e,t),s(!0,this.options,{controlOptions:{editable:!1}})}}),d.ui.EditorCommandDropDown=W,e=f.extend({render:function(e){var t=this,n=t._editor,i=t.options,o=i.tooltip||n.options.messages[i.name]||"",i=s(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-colorpicker",events:{select:function(e){this.hidePalette(),t.execute(e),setTimeout(function(){n.focus()})}}},i.controlOptions);t._widget=h('<input type="color" title="'+o+'"/>').appendTo(e).shieldColorPicker(i).swidget()},getValue:function(){return this._widget.value().hex()},setValue:function(e){this._widget.value(e.value)}}),d.ui.EditorCommandColorPicker=e,a={formatBlock:{name:"formatBlock",group:N,controlType:W,controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",dataSource:{data:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}]}}},removeFormat:{name:"removeFormat",group:N,controlType:n},fontName:{name:"fontName",group:I,styleWithCSS:!0,controlType:W.extend({setValue:function(e){var t,n=this._widget,i=e.value;if(n.value(i),n.selected()<0)for(t=0;t<n.dataSource.view.length;t++)if(n.dataSource.view[t].text==i){n.selected(t);break}n.selected()<0&&n.selected(0)}}),controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",value:"",dataSource:{data:[{text:"Inherited",value:""},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:'"Courier New",Courier,monospace'},{text:"Georgia",value:"Georgia,serif"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:'"Times New Roman",Times,serif'},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}]}}},fontSize:{name:"fontSize",group:I,controlType:W.extend({setValue:function(e){this._widget.value(T(e.value)||"")}}),controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",value:"inherit",dataSource:{data:[{text:"Inherited",value:""},{text:"1 (8pt)",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}]}}},foreColor:{name:"foreColor",group:I,controlType:e,controlOptions:{value:"transparent",palette:"basic",showLetter:!0}},backColor:{name:"backColor",group:I,styleWithCSS:!0,controlType:e,controlOptions:{value:"transparent",palette:"basic"}},bold:{name:"bold",group:R,controlType:i},italic:{name:"italic",group:R,controlType:i},underline:{name:"underline",group:R,controlType:i},strikeThrough:{name:"strikeThrough",group:R,controlType:i},subscript:{name:"subscript",group:R,controlType:i},superscript:{name:"superscript",group:R,controlType:i},justifyLeft:{name:"justifyLeft",group:D,controlType:i.extend({setValue:function(e){this._widget.checked(!!(C.ie?e.value:e.state))}})},justifyCenter:{name:"justifyCenter",group:D,controlType:i.extend({setValue:function(e){this._widget.checked(!!(C.ie?e.value:e.state))}})},justifyRight:{name:"justifyRight",group:D,controlType:i.extend({setValue:function(e){this._widget.checked(!!(C.ie?e.value:e.state))}})},justifyFull:{name:"justifyFull",group:D,controlType:i.extend({setValue:function(e){this._widget.checked(!!(C.ie?e.value:e.state))}})},insertUnorderedList:{name:"insertUnorderedList",group:L,controlType:n},insertOrderedList:{name:"insertOrderedList",group:L,controlType:n},indent:{name:"indent",group:L,controlType:n},outdent:{name:"outdent",group:L,controlType:n},createLink:{name:"createLink",group:V,controlType:n.extend({executeCommand:function(o){var r=this,a=r._editor,s=x(),l=new d.ui.Window(h('<div id="'+s+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-insertimage",title:"Insert Hyperlink",titleBarButtons:["close"],modal:!0,height:220,content:{template:{body:function(){return[h('<div style="padding:5px; margin-top:10px;"/>').append(h("<label>URL</label>"),h('<input type="text" value="http://" id="url_'+s+'" class="sui-input" style="width:220px;"/>')),h('<div style="padding:5px;"/>').append(h("<label>Tooltip</label>"),h('<input type="text" value="" id="title_'+s+'" class="sui-input" style="width:220px;"/>')),h('<div style="padding:5px;"/>').append(h("<label>New window</label>"),h('<input type="checkbox" id="newwin_'+s+'"/>')),h('<div class="sui-editor-dialog-buttons"/>').append(new d.ui.Button(h("<button>Insert</button>"),{events:{click:function(){a.focus(!0),u(a.getDoc(),"createLink",s);var e=h(a.element).find('a[href="'+s+'"]'),t=h("#url_"+s).val(),n=(h("#text_"+s).val(),h("#title_"+s).val()),i=h("#newwin_"+s).swidget().checked();h(e).attr("href",t),n&&h(e).attr("title",n),i&&h(e).attr("target","_blank"),l.close(),h("#"+s).remove(),y(o)&&o.call(r)}}}).element,new d.ui.Button(h("<button>Cancel</button>"),{events:{click:function(){l.close(),h("#"+s).remove(),y(o)&&o.call(r)}}}).element)]}}},appendToBody:!0,events:{close:function(){h("#"+s).remove(),y(o)&&o.call(r)}}});h("#newwin_"+s).shieldCheckBox()}})},unlink:{name:"unlink",group:V,controlType:n},insertImage:{name:"insertImage",group:"insert-img",controlType:i.extend({_getSelectedImg:function(){var e=this._editor.getSelection(),t=e&&"Range"==e.type?e.anchorNode:null,n=null!=t&&0<h(t).length?(h(t).prop("tagName")+"").toLowerCase():null,e=null;return"img"==n?e=t:"p"==n||"div"==n?(e=h(t).children("img").first()).length<=0&&(e=null):"body"==n&&(e=h(t).find("img").first()).length<=0&&(e=null),e},getState:function(){var e=this._getSelectedImg(),t=i.fn.getState.call(this);return e&&(t.state=!0),t},executeCommand:function(o){var r=this,a=r._editor,s=r._getSelectedImg(),l=x(),u=new d.ui.Window(h('<div id="'+l+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-insertimage",title:"Insert Image",titleBarButtons:["close"],modal:!0,height:260,content:{template:{body:function(){var e="http://",t="",n="",i="";return s&&0<h(s).length&&(e=h(s).attr("src"),t=h(s).attr("alt"),h(s).attr("width")?n=+h(s).attr("width"):(n=h(s).get(0).style&&h(s).get(0).style.width?h(s).get(0).style.width+"":h(s).css("width")+"",/px/i.test(n)&&(n=w(n))),h(s).attr("height")?i=+h(s).attr("height"):(i=h(s).get(0).style&&h(s).get(0).style.height?h(s).get(0).style.height+"":h(s).css("height")+"",/px/i.test(i)&&(i=w(i)))),[h('<div style="padding:5px; margin-top:10px;"/>').append(h("<label>URL</label>"),h('<input type="text" value="'+e+'" id="url_'+l+'" class="sui-input" style="width:220px;"/>')),h('<div style="padding:5px;"/>').append(h("<label>Alternate text</label>"),h('<input type="text" value="'+t+'" id="alt_'+l+'" class="sui-input" style="width:220px;"/>')),h('<div style="padding:5px;"/>').append(h("<label>Width</label>"),h('<input type="text" value="'+n+'" id="width_'+l+'" class="sui-input" style="width:80px;"/>')),h('<div style="padding:5px;"/>').append(h("<label>Height</label>"),h('<input type="text" value="'+i+'" id="height_'+l+'" class="sui-input" style="width:80px;"/>')),h('<div class="sui-editor-dialog-buttons"/>').append(new d.ui.Button(h("<button>Insert</button>"),{events:{click:function(){var e=h("#alt_"+l).val(),t=h("#width_"+l).val(),n=h("#height_"+l).val(),i='<img src="'+h("#url_"+l).val()+'"'+(e?' alt="'+e+'"':""),e="";/[a-zA-Z]/.test(t)?e+=" width:"+t+";":t&&(i+=' width="'+t+'"'),/[a-zA-Z]/.test(n)?e+=" height:"+n+";":n&&(i+=' height="'+n+'"'),a.paste(i+=(e?' style="'+e+'"':"")+" />"),u.close(),h("#"+l).remove(),y(o)&&o.call(r)}}}).element,new d.ui.Button(h("<button>Cancel</button>"),{events:{click:function(){u.close(),h("#"+l).remove(),y(o)&&o.call(r)}}}).element)]}}},appendToBody:!0,events:{close:function(){h("#"+l).remove(),y(o)&&o.call(r)}}})}})},about:{name:F,group:"view-"+F,tooltip:O,controlType:n.extend({refresh:function(){},executeCommand:function(e){var t=this,n=x(),i=new d.ui.Window(h('<div id="'+n+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-"+F,title:O,titleBarButtons:["close"],modal:!0,height:170,content:{template:{body:function(){return[h('<div style="text-align:center; margin-top:30px; margin-bottom:20px;"/>').append(h("<div/>").html("&#x44;&#x65;&#x6D;&#x6F;&#x20;&#x76;&#x65;&#x72;&#x73;&#x69;&#x6F;&#x6E;&#x20;&#x62;&#x79;&#x20;&#x3C;&#x61;&#x20;&#x68;&#x72;&#x65;&#x66;&#x3D;&#x22;&#x68;&#x74;&#x74;&#x70;&#x3A;&#x2F;&#x2F;&#x77;&#x77;&#x77;&#x2E;&#x73;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x75;&#x69;&#x2E;&#x63;&#x6F;&#x6D;&#x22;&#x20;&#x74;&#x61;&#x72;&#x67;&#x65;&#x74;&#x3D;&#x22;&#x5F;&#x62;&#x6C;&#x61;&#x6E;&#x6B;&#x22;&#x3E;&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x3C;&#x2F;&#x61;&#x3E;").text()),h('<div class="sui-editor-dialog-buttons"/>').append(new d.ui.Button(h("<button>Close</button>"),{events:{click:function(){i.close(),h("#"+n).remove(),y(e)&&e.call(t)}}}).element)]}}},appendToBody:!0,events:{close:function(){h("#"+n).remove(),y(e)&&e.call(t)}}})}})},viewHtml:{name:"viewHtml",group:"view-html",controlType:n.extend({refresh:function(){},executeCommand:function(e){var t=this,n=t._editor,i=x(),o=function(){h("#"+i+" textarea").outerHeight(h("#"+i+" .sui-window-content").innerHeight()-h("#"+i+" .sui-editor-dialog-buttons").outerHeight()-10)},r=new d.ui.Window(h('<div id="'+i+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-viewhtml",title:"View HTML",titleBarButtons:["close"],modal:!0,resizable:{events:{resize:o}},content:{template:{body:function(){return[h("<div/>").append(h('<textarea class="sui-input"/>').val(n.value())),h('<div class="sui-editor-dialog-buttons"/>').append(new d.ui.Button(h("<button>Update</button>"),{events:{click:function(){n.value(h("#"+i+" textarea").val()),r.close(),h("#"+i).remove(),y(e)&&e.call(t)}}}).element,new d.ui.Button(h("<button>Cancel</button>"),{events:{click:function(){r.close(),h("#"+i).remove(),y(e)&&e.call(t)}}}).element)]}}},appendToBody:!0,events:{close:function(){h("#"+i).remove(),y(e)&&e.call(t)}}});o()}})}},L={cls:r,enabled:!0,domain:r,height:r,commands:["formatBlock","bold","italic","underline","justifyLeft","justifyCenter","justifyRight","insertUnorderedList","insertOrderedList","createLink","unlink","insertImage"],messages:{formatBlock:"Format",removeFormat:"Remove formatting",fontName:"Font family",fontSize:"Font size",foreColor:"Font color",backColor:"Text highlight color",bold:"Bold",italic:"Italic",underline:"Underline",strikeThrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyLeft:"Align text left",justifyCenter:"Center text",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Add indentation",outdent:"Remove indentation",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",viewHtml:"View HTML"},events:{}},(V=c.extend({init:function(){c.fn.init.apply(this,arguments),_(this.initialOptions.commands)&&(this.options.commands=this.initialOptions.commands);var e,t,n,i=this,o=h(i.element),r=i.options,a=(r.dieOnError,r.cls),s=r.height;i._original=e=h(i.element),i._tagname=t=e.prop("tagName").toLowerCase(),n=i._eventNS=".shieldEditor"+i.getInstanceId(),"textarea"==t?(i._inline=!1,i._wrapper=e.wrap('<div class="'+A+" "+A+"-default"+(a?" "+a:"")+'"/>').parent(),e.hide(),i._iframe=s=h('<iframe class="sui-editor-iframe" frameborder="0"'+(_(s)?' height="'+s+'"':"")+"/>").appendTo(i._wrapper),i.value(e.val(),!0),i.element=o=s.contents().find("body")):(i._inline=!0,o.addClass(A+" "+A+"-inline"+(a?" "+a:"")).attr("autocorrect","off").prop("contentEditable","true")),i._initEvents(),l(i.getWin(),i.getDoc()),i._initToolbar(),h(m).on(E+n,p(i._docClick,i)),i.enabled(r.enabled)},refresh:function(e){this.refreshWithElement(this._original,e)},_isInside:function(e){var t=h(this.element),n=h(this._toolbar);return t.get(0)===e||n.get(0)===e||g(t.get(0),e)||g(n.get(0),e)},_saveSelections:function(){var e,t;if(!this._inline&&(this._savedSelections=[],(e=this.getSelection()).rangeCount))for(t=0;t<e.rangeCount;t++)this._savedSelections.push(e.getRangeAt(t))},_restoreSelections:function(){var e,t,n=this;if(!n._inline){if(n._savedSelections&&0<n._savedSelections.length)for((e=n.getSelection()).removeAllRanges(),t=0;t<n._savedSelections.length;t++)e.addRange(n._savedSelections[t]);n._savedSelections=[]}},_focus:function(e){var t=this,n=h(t.element),i=h(t._toolbar);t._inline&&(i.show(),n.addClass("sui-editor-inline-focus"),t._toolbarMoved||(i.outerWidth(n.outerWidth()),d.ui.Position.Set(i,n,{source:"left bottom",target:"left top"}))),t._restoreSelections(),t.refreshCommands()},_blur:function(e){this._saveSelections(),this._syncValue()},_click:function(e){this.refreshCommands(),this._syncValue()},_docClick:function(e){this._inline&&!this._isInside(e.target)&&this._hideToolbar()},_keydown:function(e){this.trigger(B,{domEvent:e})},_keyup:function(e){this.refreshCommands(),this._syncValue(),this.trigger(k,{domEvent:e})},_syncValue:function(){var e=[].slice.call(arguments);this._inline||(e=0<e.length?e[0]:h(this.getDoc().body).html(),h(this._original).val(e))},_hideToolbar:function(){this._toolbar.hide(),this.element.removeClass("sui-editor-inline-focus")},_initToolbar:function(){var e,t,n,i,o,r,a=this,s=a.options.commands,l=a._inline,u=[],d=[],c={};for(a._toolbar=e=h('<div class="sui-editor-toolbar"/>'),l?(e.addClass("sui-editor-toolbar-inline").appendTo(m.body),e.shieldDraggable().swidget().one("drag",function(){a._toolbarMoved=!0}),a._toolbarMoved=!1):e.prependTo(a._wrapper),r=0;r<s.length;r++)u.push(f.getInstance(a,s[r]));for(u.push(f.getInstance(a,F)),r=0;r<u.length;r++)c[u[r].options.group]||(c[u[r].options.group]=[],d.push(u[r].options.group)),c[u[r].options.group].push(u[r]);for(a._commands=[],r=0;r<d.length;r++)for(var p=d[r],g=0;g<c[p].length;g++)t=c[p][g],o=p&&n===p?i:h('<div class="sui-editor-toolbar-group"/>').appendTo(e),t.render(o),a._commands.push(t),n=p,i=o;l&&e.hide()},_afterCommand:function(e,t,n){this._syncValue(),this.refreshCommands(),this.trigger("execute",{domEvent:e,commandName:t.name,state:n})},refreshCommands:function(){var e,t=this,n=t._commands||[];if(!t._refreshInProgress){for(t.focus(!0),t._refreshInProgress=!0,e=0;e<n.length;e++)n[e].refresh();t._refreshInProgress=!1}},_getWrapper:function(){return this._inline?this.element:this._wrapper},getWin:function(){var e;return this._inline?t:(e=h(this._iframe).get(0)).contentWindow||e.contentDocument},getDoc:function(){var e;return this._inline?m:((e=h(this._iframe).get(0)).contentWindow||e.contentDocument).document},focus:function(e){var t,n=this;e&&!n._refreshInProgress&&(t=n._refreshInProgress=!0),h(n._inline?n.element:n.getDoc().body).focus(),!n._inline&&C.ie&&n._focus(),t&&(n._refreshInProgress=!1)},execute:function(e,t){u(this.getDoc(),e,t)},createRange:function(){return this.getDoc().createRange()},getRange:function(){return this.focus(!0),this.getSelection().getRangeAt(0)},getSelection:function(){return this.getWin().getSelection()},selectRange:function(e){var t=this.getSelection();this.focus(!0),t.removeAllRanges(),t.addRange(e),this.refreshCommands()},paste:function(e){var t,n,i,o=this,r=o.getDoc(),a=o.getRange();for(o.focus(!0),a.deleteContents(),(t=r.createElement("div")).innerHTML=e,n=r.createDocumentFragment();i=t.firstChild;)n.appendChild(i);a.insertNode(n),o._syncValue(),o.refreshCommands()},update:function(){this._syncValue()},_initEvents:function(e){var t=this,n=t._eventNS,i=C.ie;_(e)||(e=t._inline?t.element:i?t.getWin():t.getDoc()),i&&(t.getDoc().body.onbeforedeactivate=null),h(e).off(n).on("focus"+n,p(t._focus,t)).on(E+n,p(t._click,t)).on(B+n,p(t._keydown,t)).on(k+n,p(t._keyup,t)),i?t.getDoc().body.onbeforedeactivate=p(t._blur,t):h(e).on("blur"+n,p(t._blur,t))},_getIframeStyles:function(){return"<style>html,body{margin:0;padding:2px;}p{margin:0 0 0.5em 0;}</style>"},_getIframeScripts:function(){var e=this.options.domain;return e?'<script type="text/javascript">document.domain="'+e+'";<\/script>':""},value:function(){var e=this,t=[].slice.call(arguments),n=e._inline,i=h(e._original);if(!(0<t.length))return(n?i:h(e.getDoc().body)).html();i=t[0],t=t[1],n?h(e.element).html(i):((n=e.getDoc()).open().write('<head><meta charset="utf-8">'+e._getIframeStyles()+e._getIframeScripts()+'</head><body contenteditable="true" autocorrect="off">'+i+"</body>"),n.close(),e.element=e.getDoc().body,e._initEvents(n),t||e._syncValue(i))},hide:function(){h(this._getWrapper()).hide()},show:function(){h(this._getWrapper()).show()},isVisible:function(){return h(this._getWrapper()).is(":visible")},enabled:function(){var e=[].slice.call(arguments);if(!(0<e.length))return this._enabled;(e=!!e[0])?h(this._getWrapper()).removeAttr(S).removeClass("sui-editor-disabled"):h(this._getWrapper()).attr(S,S).addClass("sui-editor-disabled"),this._enabled=e},destroy:function(){var e,t=this,n=t.options.cls,i=t._original,o=t._eventNS;if(h(t.element).off(o),h(m).off(o),t._toolbar){if(t._commands){for(e=0;e<t._commands.length;e++)t._commands[e].destroy();t._commands=r}h(t._toolbar).off(o).remove(),t._toolbar=r}t._inline?h(i).removeAttr("autocorrect").prop("contentEditable","off").removeClass(A+" "+A+"-inline"+(n?" "+n:"")):(h(t._iframe).remove(),h(i).unwrap(),h(i).show()),t._inline=t._iframe=t._wrapper=t._toolbarMoved=t._savedSelections=r,c.fn.destroy.call(t)}})).defaults=L,d.ui.plugin("Editor",V)}(jQuery,shield,this);