/* Shield UI 1.7.44 Free for Non-Commercial Version | Copyright 2013-2022 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(g,e,n){var m=e.ui.Widget,c=(e.Class,document),h=g.proxy,a=g.each,f=(g.extend,g.map),s=Math.min,o=Math.max,p=(e.guid,e.iid),v=e.error,d=e.format,_=e.is.defined,b=(e.is.boolean,e.is.integer,e.is.func,e.is.array,e.is.object,e.is.string,e.support.browser,"disabled"),F="multiple",y="change",I="dragover",L="dragleave",D="drop",r="select",P="remove",S="error",x="progress",C="load",l="upload",u="complete",T="POST",w="pending",U="uploading",E="complete",A="removing",B="error",i={pending:"&#10005;",uploading:"&#10754;",complete:"&#10005;",removing:"&#10754;",error:"&#10005;"},t="sui-upload",R=t+"-target-input",k=t+"-status",N=t+"-file",M=t+"-xhr",j=t+"-form",z=t+"-iframe",q={cls:n,enabled:!0,async:{enabled:!1,autoUpload:!1,batch:!1,save:{url:n,field:n},remove:{url:n,field:"fileNames",method:T}},multiple:!0,files:{enabled:!0,initial:n,template:"{name} ({size} bytes)"},messages:{drop:"Drop files here to upload",select:"Select files ...",upload:"Upload files"},events:{}},t=m.extend({init:function(){m.fn.init.apply(this,arguments);var e,t,i,a,s,o=this,n=o.options,l=n.dieOnError,r=n.cls,d=n.messages,u=n.files,p=u.enabled,f=u.initial,_=n.async.enabled;o._xhr2support=e=!!(new XMLHttpRequest).upload,o._original=t=g(o.element),"input"==t.prop("tagName").toLowerCase()&&"file"==t.attr("type").toLowerCase()?(s=o._eventNS=".shieldUpload"+o.getInstanceId(),t.wrap("<form>").closest("form").get(0).reset(),t.unwrap(),t.removeAttr(b),n.multiple?t.attr(F,F):t.removeAttr(F),o.element=u=t.wrap("<div/>").parent(),u.addClass("sui-upload"+(r?" "+r:"")),o._selectButtonDiv=t.wrap("<div/>").parent().append('<span class="sui-upload-button-text">'+d.select+"</span>").addClass("sui-upload-button"),o._dropFilesDiv=i=o._selectButtonDiv.wrap('<div class="sui-upload-dropfiles"/>').parent(),o._dropText=a=g('<div class="sui-upload-drop">'+d.drop+"</div>").appendTo(i).hide(),p&&(o._fileList=g('<ul class="sui-upload-files"/>').appendTo(u).hide()),o._uploadButtonDiv=g('<button class="sui-upload-button sui-upload-button-upload" type="button">'+d.upload+"</button>").appendTo(u).click(h(o._uploadClicked,o)).hide(),t.on(y+s,h(o._fileSelected,o)),_&&e&&(t.on(D+s,h(o._fileChanged,o)),g(c).on(I+s,function(e){e.stopPropagation(),e.preventDefault(),a.show()}).on(L+s,function(e){e.stopPropagation(),e.preventDefault(),a.hide()}).on(D+s,function(e){e.stopPropagation(),e.preventDefault(),a.hide()}),i.on(I,function(){i.addClass("sui-upload-dropfiles-hover")}).on(L,function(){i.removeClass("sui-upload-dropfiles-hover")}).on(D,h(o._fileChanged,o))),p&&f&&0<f.length&&o._addFiles(f,E),o.enabled(n.enabled)):v("shieldUpload: Must be initialized from an input with type file.",l)},refresh:function(e){this.refreshWithElement(this._original,e)},_getFiles:function(e){var t=[],i=g(e.target);return e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files?t=e.originalEvent.dataTransfer.files:e.target.files?t=e.target.files:(t=g.makeArray(i.prop("files"))).length?!_(t[0].name)&&t[0].fileName&&a(t,function(e,t){t.name=t.fileName,t.size=t.fileSize}):t=(i=i.prop("value"))?[{name:i.replace(/^.*\\/,"")}]:[],t},_getPendingFileItems:function(){return g(this._fileList).children("li.sui-upload-file-"+w)},_getFileInfoList:function(e){return this._toFileInfoList(g(e).data(N))},_toFileInfoList:function(e){var t,i=[];if(this._isFileList(e))for(t=0;t<e.length;t++)i.push(e[t]);else i.push(e);return i},_isSingleFile:function(e){return e&&e.name},_isFileList:function(e){return e.length&&0<e.length},_fileSelected:function(e){var t=this,i=t.options,a=i.async.enabled,s=t._xhr2support,o=t._eventNS,n=g(e.target),l=t._getFiles(e);t.trigger(r,{files:t._toFileInfoList(l)}).isDefaultPrevented()||(e=g('<input type="file" name="'+n.attr("name")+'"/>').insertAfter(n).on(y+o,h(t._fileSelected,t)),i.multiple&&e.attr(F,F),a&&s&&e.on(D+o,h(t._fileChanged,t)),n.hide(),t._addFiles(l,w,n))},_fileChanged:function(e){var t=this,i=t._getFiles(e);e.stopPropagation(),e.preventDefault(),t._dropText.hide(),t._dropFilesDiv.removeClass("sui-upload-dropfiles-hover"),t.trigger(r,{files:t._toFileInfoList(i)}).isDefaultPrevented()||t._addFiles(i,w)},_addFiles:function(e,t,i){var a,s=this,o=s.options,n=o.async;if(o.files.enabled){if(n.enabled&&!n.batch||!o.multiple)for(a=0;a<e.length;a++)s._renderFile(e[a],t,i);else s._renderFile(e,t,i);s._afterAddRemoveFiles(),n.autoUpload&&s._uploadAllPending()}},_renderFile:function(e,t,i){var a,s=this,o=s.options,n=o.files.template,l=(s._fileList,s._toFileInfoList(e)),r=[],e=g('<li class="sui-upload-file"/>').data(N,e).appendTo(s._fileList);for(i&&e.data(R,i),a=0;a<l.length;a++)r.push(g('<span class="sui-upload-file-text"/>').append(d(n,l[a]))),a<l.length-1&&r.push(g('<span class="sui-upload-file-text-sep">,</span>'));o.async.enabled&&s._xhr2support?r.push(g('<span class="sui-upload-file-progress"/>')):e.addClass("sui-upload-file-no-progress"),r.push(g('<span class="sui-upload-file-action"/>').on("click",h(s._actionClicked,s,e))),e.append(r),s._setStatus(e,t),t===E&&s._setProgress(e,100)},_afterAddRemoveFiles:function(){var e=this.options.async,t=this._fileList,i=this._uploadButtonDiv;0<t.children("li").length?t.show():t.hide(),0<this._getPendingFileItems().length?e.enabled&&!e.autoUpload&&i.show():i.hide()},_actionClicked:function(e,t){var i=this,a=i._getStatus(e);i._enabled&&(a==U?i._abortUpload(e,t):a==A?i._abortRemove(e,t):i._removeItem(e,t))},_removeItem:function(a,s){var o,n=this,e=(n.options,n.options.async),t=e.remove,i=n._getStatus(a),l=n._getFileInfoList(a),r=a.data(R),d=n._eventNS,u={},p=n.trigger(P,{domEvent:s,status:i,files:l});p.isDefaultPrevented()||(o=function(){g(r)[0]===g(n._original)[0]?g(r).hide().attr(b,b):g(r).off(d).remove(),g(a).off(d).remove(),n._afterAddRemoveFiles()},i==w||i==B?o():i==E&&(e.enabled?(n._setStatus(a,A),u[t.field]=f(l,function(e){return e.name}),g.support.cors=!0,g.ajax({method:t.method,url:t.url,traditional:!0,data:u}).done(function(e,t,i){o()}).fail(function(e,t,i){n.trigger(S,{domEvent:s,operation:P,listItem:a,files:l,jqXHR:e,textStatus:t,errorThrown:i,responseText:i});p.isDefaultPrevented()||n._setStatus(a,B)})):o()))},_abortRemove:function(e,t){},_setStatus:function(e,t){g(e).data(k,t).removeClass("sui-upload-file-pending sui-upload-file-uploading sui-upload-file-complete sui-upload-file-removing sui-upload-file-error").addClass("sui-upload-file-"+t).children(".sui-upload-file-action").first().html(i[t]),this._afterAddRemoveFiles()},_getStatus:function(e){return g(e).data(k)},_uploadAllPending:function(){var e,t,i=this,a=(i.options.async,i._getPendingFileItems()),s=(a||[]).length,o=[];if(!(s<1)){for(t=0;t<s;t++)e=g(a[t]).data(N),i._isSingleFile(e)?o.push(e):i._isFileList(e)&&(o=o.concat(e));if(!i.trigger(l,{files:o}).isDefaultPrevented())for(t=0;t<s;t++)i._startUpload(a[t])}},_startUpload:function(e){var t,i,a,s,o,n,l=this,r=l.options.async.save,d=r.field,u=l._getFileInfoList(e);if(_(d)||(d=g(l._original).attr("name")),l._setProgress(e,0),l._xhr2support){for(t=new FormData,i=new XMLHttpRequest,n=0;n<u.length;n++)t.append(d,u[n]);g(e).data(M,i),i.open(T,r.url),i.upload.addEventListener(x,h(l._onUploadProgress,l,e)),i.upload.addEventListener(C,h(l._onUploadComplete,l,e)),i.upload.addEventListener(S,h(l._onUploadError,l,e)),i.onreadystatechange=function(){4==i.readyState&&200!=i.status&&l._onUploadError(e)},i.send(t)}else(o=g(e).data(R))&&(a="shieldUploadIframe"+p(),s=g('<iframe name="'+a+'" id="'+a+'" class="sui-upload-iframe" width="0" height="0" tabindex="-1"/>').appendTo(c.body),g(s).on(C,h(l._onIframeComplete,l,e)),o=g('<form class="sui-upload-form" method="POST" enctype="multipart/form-data" action="'+r.url+'" target="'+a+'" tabindex="-1"/>').appendTo(c.body).append(o),g(e).data(z,s).data(j,o),o.get(0).submit());l._setStatus(e,U)},_abortUpload:function(e,t){var i,a=this;a._xhr2support?((i=g(e).data(M))&&i.abort(),g(e).removeData(M)):a._cleanupIframeForm(e),a._setStatus(e,w),a._setProgress(e,0),a.trigger("abort",{listItem:e,files:a._getFileInfoList(e)})},_cleanupIframeForm:function(e){var t=g(e).data(z),i=g(e).data(j),a=g(e).data(R);t&&g(t).attr("src","about:blank"),i&&(a&&g(a).prependTo(this._selectButtonDiv),g(i).remove(),g(e).removeData(j)),t&&(g(t).remove(),g(e).removeData(z))},_setProgress:function(e,t){e=g(e).children(".sui-upload-file-progress").first();e&&0<e.length&&e.empty().append(g('<span class="sui-upload-file-progress-inner"/>').css("width",t+"%"))},_onUploadProgress:function(e,t){var i=t.lengthComputable?s(100,o(0,t.loaded/t.total*100)):n;_(i)&&this._setProgress(e,i),this.trigger(x,{domEvent:t,percentage:i,listItem:e,files:this._getFileInfoList(e)})},_onUploadComplete:function(e){this._setStatus(e,E),this._setProgress(e,100),g(e).removeData(M),this.trigger(u,{listItem:e,files:this._getFileInfoList(e)})},_onIframeComplete:function(e,t){var i=this,a=g(e).data(z),s=i._getFileInfoList(e),o="";if(a){try{o=g(a).contents().find("body").html()}catch(e){o=e?e.description||e.message:""}o?i.trigger(S,{domEvent:t,operation:l,listItem:e,files:s,status:n,responseText:o}).isDefaultPrevented()||(i._setStatus(e,B),i._setProgress(e,0)):(i._setStatus(e,E),i._setProgress(e,100),i.trigger(u,{listItem:e,files:s})),i._cleanupIframeForm(e)}},_onUploadError:function(e,t){var i,a,s=this,o=s._getStatus(e),n=g(e).data(M);o!==B&&(n&&(n.readyState,i=n.status,a=n.responseText,n.statusText),g(e).removeData(M),s.trigger(S,{domEvent:t,operation:l,listItem:e,files:s._getFileInfoList(e),status:i,responseText:a}).isDefaultPrevented()||(s._setStatus(e,B),s._setProgress(e,0)))},_uploadClicked:function(e){this._enabled&&this._uploadAllPending()},enabled:function(){var e,t=g(this.element),i=[].slice.call(arguments);if(!(0<i.length))return this._enabled;e=!!i[0],i=t.find('input[type="file"]').filter(":visible"),e?(t.removeAttr(b).removeClass("sui-upload-disabled"),g(i).removeAttr(b)):(t.attr(b,b).addClass("sui-upload-disabled"),g(i).attr(b,b)),this._enabled=e},destroy:function(){var e=this,t=g(e.element),i=g(e._original),a=e._eventNS;g(c).off(a),g(t).find('input[type="file"]').off(a),g(t).find('input[type="file"]').not(i).remove(),e._uploadButtonDiv&&(g(e._uploadButtonDiv).remove(),e._uploadButtonDiv=null),e._dropText&&(g(e._dropText).remove(),e._dropText=null),e._fileList&&(g(e._fileList).remove(),e._fileList=null),g(t).find(".sui-upload-button-text").remove(),g(i).unwrap(),g(i).unwrap(),g(i).unwrap(),e._selectButtonDiv=e._dropFilesDiv=null,g(i).removeAttr(b).show(),m.fn.destroy.call(e)}});t.defaults=q,e.ui.plugin("Upload",t)}(jQuery,shield);